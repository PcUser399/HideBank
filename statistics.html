<!DOCTYPE html>

<html lang="en">
  <head>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <title>Visit www.pixelrocket.store to learn how to become a frontend web developer</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <link rel="preconnect" href="https://fonts.gstatic.com"/>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&amp;display=swap" rel="stylesheet"/>
    <link href="https://api.fontshare.com/v2/css?f[]=clash-grotesk@400,300,500&amp;display=swap" rel="stylesheet"/>
    <link rel="stylesheet" href="css/styles.css"/>
    <link rel="icon" type="image/png" sizes="32x32" href="favicon.png"/>
  </head>
  <body class="antialiased bg-body text-body font-body">
    <div>
      <section>
        <div class="container px-4 mx-auto headder special" >
          <div class="flex items-center justify-between pt-5 pb-2.5 -m-2" style="padding: 0 calc(2.5vh + 2.5vw); padding-top:calc(1vh + 1vw) ;padding-bottom: calc(1vh + 1vw);">            <div class="w-auto p-2">
              <div class="flex flex-wrap items-center">
                <div class="w-auto"><a class="relative z-10 inline-block" href="index.html"><img src="images/logo.svg" style="width: calc(7.5vh + 7.5vw);"  alt=""/></a></div>
              </div>
            </div>
            <div class="w-auto p-2">
              <div class="flex flex-wrap items-center">
                <div class="w-auto hidden lg:block">
                  <ul class="flex items-center mr-12">
                    <li class="mr-12 text-white font-medium hover:text-opacity-90 tracking-tighter"><a href="pricing.html"></a></li>
                    <li class="mr-12 text-white font-medium hover:text-opacity-90 tracking-tighter"><a href="blog.html"></a></li>
                    <li class="text-white font-medium hover:text-opacity-90 tracking-tighter"><a href="contact.html"></a></li>
                  </ul>
                </div>
                <div class="w-auto hidden lg:block">
                  <div class="inline-block"><a class="inline-block px-8 py-4 text-white hover:text-black tracking-tighter hover:bg-green-400 border-2 border-white focus:border-green-400 focus:border-opacity-40 hover:border-green-400 focus:ring-4 focus:ring-green-400 focus:ring-opacity-40 rounded-full transition duration-300" href="about.html">About Us</a></div>
                </div>
                <div class="w-auto lg:hidden">
                  <button class="relative z-10 inline-block" x-on:click="mobileNavOpen = !mobileNavOpen">
                    <svg class="text-green-500" width="51" height="51" viewbox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <rect width="56" height="56" rx="28" fill="currentColor"></rect>
                      <path d="M37 32H19M37 24H19" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="statistics-main">
            <div class="container-statistics">
              <div class="st-title">
                <div style="color:rgb(35, 114, 167) ;">  Loans </div> <div class="st-sp">Statistics</div>
              </div>
              <div class="middle-part">
                <div class="statistic-info">
                  <div class="st-inf-up">
                    <div class="st-point">
                      <div class="st-pt-an"></div>
                    </div>
                     Total nb of Loans :
                  </div>
                  <div  class="st-holder">
                    <div id="t-n-loans" >0</div>
                    <div class="unit">Loans</div>
                  </div>
                  <div class="st-b-g">
                    <div  id="diff-Total-L" >▲ 0</div>% Last Month
                  </div>
                </div>

                <div class="statistic-info">
                  <div class="st-inf-up">
                    <div class="st-point">
                      <div class="st-pt-an"></div>
                    </div>
                    <select class="select-account-type status-active" id="s-loan-status" style="outline: none;font-size: none;width:auto ; padding : 0  ;margin-top: 0px;height: 0%;" disabled>
                      <option class="option-account-type status-active">Active</option>
                      <option class="option-account-type status-completed">Completed</option>
                      <option class="option-account-type status-overdue">Overdue</option>
                      <option class="option-account-type status-Request">Request</option>
                    </select> 
                    loans :
                  </div>
                  <div  class="st-holder">
                    <div id="nb-loans-by-status">0</div>
                    <div class="unit">Loans</div>
                  </div>
                  <div  class="st-b-n status-Active" id="hellnah">
                    <div  id="diff-Status-L" >0</div>% of All Loans
                  </div>
                </div>

                <div class="statistic-info">
                  <div class="st-inf-up">
                    <div class="st-point">
                      <div class="st-pt-an"></div>
                    </div>
                    <select class="select-account-type"  id="s-loan-type" style="outline: none;font-size: none;width:auto ; padding : 0  ;margin-top: 0px;height: 0%;" disabled>
                      <option class="option-account-type unit">buisness</option>
                      <option class="option-account-type unit">car</option>
                      <option class="option-account-type unit">home</option>
                      <option class="option-account-type unit">student</option>
                      <option class="option-account-type unit">general</option>
                    </select> 
                    loans :
                  </div>
                  <div  class="st-holder">
                    <div id="nb-loans-by-type">0</div>
                    <div class="unit">Loans</div>
                  </div>
                  <div class="st-b-n">
                    <div  id="diff-Type-L" >0</div>% of All Loans
                  </div>
                </div>

                <div class="statistic-info">
                  <div class="st-inf-up">
                    <div class="st-point">
                      <div class="st-pt-an"></div>
                    </div>
                    Start :
                    <input type="date" style="background-color: transparent;width: 57.5%;cursor: text;font-size: calc(0.5vh + 0.5vw);" id="l-start-date">
                    
                  </div>
                  <div  class="st-holder">
                    <div id="nb-of-loans-by-date">0</div>
                    <div class="unit">Loans</div>
                  </div>
                  End : 
                  <input type="date" style="background-color: transparent;width: 57.5%;cursor: text;font-size: calc(0.5vh + 0.5vw);" id="l-end-date" >
                  <button></button>

                </div>

              </div>
              
              <div class="st-lower-section">
                <canvas id="LoanChart"></canvas>

              </div>
            </div>

            <div class="container-statistics">
              <div class="st-title">
                <div style="color:rgb(41, 124, 72) ;"> Cusomters </div> <div class="st-sp">Statistics</div>
              </div>
              <div class="middle-part">
                <div class="statistic-info">
                  <div class="st-inf-up">
                    <div class="st-point">
                      <div class="st-pt-an"></div>
                    </div>
                     Total nb of Accounts :
                  </div>
                  <div  class="st-holder">
                    <div id="total-number-of-Cus">0</div>
                    <div class="unit">Account</div>
                  </div>
                  <div class="st-b-g">
                    <div  id="diff-Total-C" >▲ 0</div>% Last Month
                  </div>
                </div>

                <div class="statistic-info">
                  <div class="st-inf-up">
                    <div class="st-point">
                      <div class="st-pt-an"></div>
                    </div>
                     Acc With Most Loans :
                  </div>
                  <div  class="st-holder">
                    <div id="cus-most-loan">ACC0000</div>
                    <div class="unit" id="most-loan-for-cus">0 Loans</div>
                  </div>
                  <div id="acc-of-most-loan-of-cus">
                    Pending...
                  </div>
                </div>

                <div class="statistic-info">
                  <div class="st-inf-up">
                    <div class="st-point">
                      <div class="st-pt-an"></div>
                    </div>
                     Cus Highest Balance :
                  </div>
                  <div  class="st-holder">
                    <div id="cus-most-balance">CUS0000</div>
                    <div class="unit" id="most-balance-for-cus">0 TND</div>
                  </div>
                  <div  id="acc-of-most-balance-of-cus">
                    Pending...
                  </div>
                </div>

                <div class="statistic-info">
                  <div class="st-inf-up">
                    <div class="st-point">
                      <div class="st-pt-an"></div>
                    </div>
                     Cus Lowest Balance :
                  </div>
                  <div  class="st-holder">
                    <div id="cus-least-balance">CUS0000</div>
                    <div class="unit" id="least-balance-for-cus">0 TND</div>
                  </div>
                  <div id="acc-of-least-balance-of-cus">
                    Pending...
                  </div>
                </div>

              </div>

              <div class="st-lower-section">
                <canvas id="CustomersChart"></canvas>
              </div>
              
            </div>

            
            <div class="container-statistics">
              <div class="st-title">
                <div style="color:rgb(119, 100, 179) ;"> Employees </div> <div class="st-sp">Statistics</div>
              </div>
              <div class="middle-part">
                <div class="statistic-info">
                  <div class="st-inf-up">
                    <div class="st-point">
                      <div class="st-pt-an"></div>
                    </div>
                     Total nb of Employees :
                  </div>
                  <div  class="st-holder">
                    <div id="total-number-of-emp">0</div>
                    <div class="unit">Employee</div>
                  </div>
                  <div class="st-b-g">
                    <div  id="diff-Total-E" >▲ 0</div>% Last Month
                  </div>
                </div>

                <div class="statistic-info">
                  <div class="st-inf-up">
                    <div class="st-point">
                      <div class="st-pt-an"></div>
                    </div>
                    Branch :
                    <input autocomplete="off"  style="background-color: transparent;width: 30%;cursor: text;font-size: calc(0.5vh + 0.5vw);padding: 0 15px;border: 1px solid rgba(255,255,255,0.1);border-radius: 50px;" id="nb-of-emp-by-branch-inp">
                    
                  </div>
                  <div  class="st-holder">
                    <div id="nb-of-emp-by-branch">0</div>
                    <div class="unit">Employee</div>
                  </div>
                  <div class="st-b-n">
                    <div  id="diff-branch-E" > 0</div>% of All Emp
                  </div>
                </div>

                <div class="statistic-info">
                  <div class="st-inf-up">
                    <div class="st-point">
                      <div class="st-pt-an"></div>
                    </div>
                     Emp Highest Salary :
                  </div>
                  <div  class="st-holder">
                    <div id="emp-most-salary">EMP0000</div>
                    <div class="unit" id="most-salary-for-emp">0 TND</div>
                  </div>
                  <div  style="letter-spacing: 0.5px;font-size: calc(0.5vh + 0.5vw);" id="emp-most-salary-status">
                    Pending...
                  </div>
                </div>

                <div class="statistic-info">
                  <div class="st-inf-up">
                    <div class="st-point">
                      <div class="st-pt-an"></div>
                    </div>
                     Emp Lowest Salary :
                  </div>
                  <div  class="st-holder">
                    <div   id="emp-least-salary">EMP0000</div>
                    <div class="unit" id="least-salary-for-emp">0 TND</div>
                  </div>
                  <div   style="letter-spacing: 0.5px;font-size: calc(0.5vh + 0.5vw);" id="emp-least-salary-status">
                    Pending...
                  </div>
                </div>

              </div>

              <div class="st-lower-section">
                <canvas id="EmployeesChart"></canvas>
              </div>
            </div>
        </div>


      <section class="py-12">
        <div class="container px-4 mx-auto">
          <div class="relative pt-20 px-4 bg-gray-900 bg-opacity-20 overflow-hidden rounded-6xl">
            <div class="text-center md:max-w-xl mx-auto removed pb-20"><span class="inline-block mb-4 text-sm text-green-400 font-medium tracking-tighter">Hide Bank</span>
              <h2 class="font-heading mb-6 text-7xl text-white tracking-8xl">Hide&nbsp Bank &nbsp:&nbsp a&nbsp Bank&nbsp ment &nbspto&nbsp serve &nbspYou</h2><a class="mb-8 text-gray-300 relative z-10" href="https://www.pixelrocket.store">Contact The devaloper Team Via email if some details remain unclear</a><img class="absolute -bottom-24 right-0 z-0" src="template-assets/images/application-section/lines2.png" alt=""/>
            </div>
          </div>
        </div>
      </section>
      <section class="bg-gray-50 overflow-hidden">
        <div class="py-14 bg-black rounded-b-7xl"></div>
        <div class="py-24">
          <div class="container px-4 mx-auto">
            <div class="flex flex-wrap justify-center -m-8 mb-28">
              <div class="w-full md:w-1/2 lg:w-4/12 p-8">
                <div class="md:max-w-xs"><img class="mb-7" src="images/logo-dark.svg" alt=""/>
                  <p class="text-gray-400 font-medium">Global Bank is a strategic branding agency focused on brand creation, rebrands, and brand</p>
                </div>
              </div>
              <div class="w-full md:w-1/2 lg:w-2/12 p-8">
                <h3 class="mb-6 text-lg text-black font-medium">About</h3>
                <ul>
                  <li class="mb-2.5"><a class="inline-block text-lg font-medium text-gray-400 hover:text-black transition duration-300" href="#">Contact</a></li>
                  <li class="mb-2.5"><a class="inline-block text-lg font-medium text-gray-400 hover:text-black transition duration-300" href="#">Blog</a></li>
                  <li class="mb-2.5"><a class="inline-block text-lg font-medium text-gray-400 hover:text-black transition duration-300" href="#">Our Story</a></li>
                  <li><a class="inline-block text-lg font-medium text-gray-400 hover:text-black transition duration-300" href="#">Careers</a></li>
                </ul>
              </div>
              <div class="w-full md:w-1/2 lg:w-2/12 p-8">
                <h3 class="mb-6 text-lg text-black font-medium">Company</h3>
                <ul>
                  <li class="mb-2.5"><a class="inline-block text-lg font-medium text-gray-400 hover:text-black transition duration-300" href="#">Contact</a></li>
                  <li class="mb-2.5"><a class="inline-block text-lg font-medium text-gray-400 hover:text-black transition duration-300" href="#">Blog</a></li>
                  <li class="mb-2.5"><a class="inline-block text-lg font-medium text-gray-400 hover:text-black transition duration-300" href="#">Our Story</a></li>
                  <li><a class="inline-block text-lg font-medium text-gray-400 hover:text-black transition duration-300" href="#">Careers</a></li>
                </ul>
              </div>
              <div class="w-full md:w-1/2 lg:flex-1 p-8">
                <div class="flex flex-wrap -m-2">
                  <div class="w-full p-2"><a class="block py-5 px-8 bg-white rounded-full" href="#">
                      <div class="flex flex-wrap items-center -m-2">
                        <div class="w-auto p-2"><img src="template-assets/images/footers/twitter.svg" alt=""/></div>
                        <div class="flex-1 p-2">
                          <p class="text-black">Follow us on Twitter for updates</p>
                        </div>
                      </div></a></div>
                  <div class="w-full p-2"><a class="block py-5 px-8 bg-white rounded-full" href="#">
                      <div class="flex flex-wrap items-center -m-2">
                        <div class="w-auto p-2"><img src="template-assets/images/footers/instagram.svg" alt=""/></div>
                        <div class="flex-1 p-2">
                          <p class="text-black">Follow us on Instagram for updates</p>
                        </div>
                      </div></a></div>
                  <div class="w-full p-2"><a class="block py-5 px-8 bg-white rounded-full" href="#">
                      <div class="flex flex-wrap items-center -m-2">
                        <div class="w-auto p-2"><img src="template-assets/images/footers/tiktok.svg" alt=""/></div>
                        <div class="flex-1 p-2">
                          <p class="text-black">Follow us on TikTok for updates</p>
                        </div>
                      </div></a></div>
                </div>
              </div>
            </div>
            <div class="flex flex-wrap justify-between -m-2">
              <div class="w-auto p-2">
                <p class="inline-block text-sm font-medium text-black text-opacity-60">© 2023 Global Bank</p>
              </div>
              <div class="w-auto p-2">
                <div class="flex flex-wrap items-center -m-2 sm:-m-7">
                  <div class="w-auto p-2 sm:p-7"><a class="inline-block text-sm text-black text-opacity-60 hover:text-opacity-100 font-medium transition duration-300" href="#">Terms of Use</a></div>
                  <div class="w-auto p-2 sm:p-7"><a class="inline-block text-sm text-black text-opacity-60 hover:text-opacity-100 font-medium transition duration-300" href="#">Privacy Policy</a></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="Load.js"></script>
    <script>
      let allEmployees ;
      let allMonths = [
        'Jan', 'Feb', 'Mar', 'Apr',
        'May', 'Jun', 'Jul', 'Aug',
        'Sep', 'Oct', 'Nov', 'Dec'
      ];
      let last6months = generateLast6Months();
      el = document.getElementById('s-loan-status');
      el2 = document.getElementById('s-loan-type');
      setTimeout(()=>el.disabled=true,10);
      setTimeout(()=>el2.disabled=true,10);

      let AI = 3000 ;

      let FA = 1000 ;
      

      function generateLast6Months(){
        let month = new Date().getMonth()  ;
        month -= 5 ;
        if(month<0)month+=12;
        let arr = [] ;
        for(let i = 0 ; i<6;i++){
          arr.push(month);
          month++;
          if(month==12){month=0}
        }
        return arr.map((val)=>allMonths[val])
      }
      main();
      async function main(){
        // res = await Load('Load All Employees');
        // allEmployees = JSON.parse(res.result);
        window.scrollTo(0,0);     
        updateLoanStatus();
        updateLoanType();
        updateLoanDate();
        updateEmplyeeBranch();
        
        

        






        let interestRateEvelution ;
        let nbOfCustomersEvelution ;
        let nbOfEmployeesEvelution ;
        let LoansSdata ;
        let CustomersStatistics ;
        let EmployeesStatistics ; 
        let res ;


        res = await Load('load Interest Rate Evolution');
        interestRateEvelution = JSON.parse(res.result).map((val)=>{
          return (val/100).toFixed(2);
        });

        res = await Load('load Accounts Number Evolution');
        nbOfCustomersEvelution = JSON.parse(res.result);

        res = await Load('load Employees Number Evolution');
        nbOfEmployeesEvelution = JSON.parse(res.result);


        res = await Load('load loans Statistics');
        LoansSdata = JSON.parse(res.result);

        res = await Load('load Customer Statistics');
        CustomersStatistics = JSON.parse(res.result);

        res = await Load('load Employee Statistics');
        EmployeesStatistics = JSON.parse(res.result);










      setTimeout(()=>el.disabled=false,AI + 75); // putted after all awaits
      setTimeout(()=>el2.disabled=false,AI + 75);


        

        
        function updateLoanStatus(){
          let el = document.getElementById('s-loan-status') ;
          
          el.addEventListener('change',()=>{
            el.className = "select-account-type status-"+el.value ;
            if(LoansSdata[0][el.value+"Loans"] != 0){
              el.disabled = true ;
              setTimeout(()=>{el.disabled=false;},FA+75)
            }
            document.getElementById('hellnah').className = 'st-b-n status-'+el.value ;
            liveStatisticsAnimation(Math.abs(LoansSdata[1][el.value+"Loans"]),0.01,FA,document.getElementById('diff-Status-L'));
            liveStatisticsAnimation(LoansSdata[0][el.value+"Loans"],1,FA,document.getElementById('nb-loans-by-status'));
          })
        }

        function updateLoanType(){
          let el = document.getElementById('s-loan-type') ;
          el.addEventListener('change',()=>{
            if(LoansSdata[0][el.value+"Loans"] != 0){
              el.disabled = true ;
              setTimeout(()=>{el.disabled=false;},FA+75)
            }
            liveStatisticsAnimation(Math.abs(LoansSdata[1][el.value+"Loans"]),0.01,FA,document.getElementById('diff-Type-L'));
            liveStatisticsAnimation(LoansSdata[0][el.value+"Loans"],1,FA,document.getElementById('nb-loans-by-type'));
          })
        }


       async function updateLoanDate(){
          let el = document.getElementById('l-start-date') ;
          let el2 = document.getElementById('l-end-date') ;
          let res ;
          el.addEventListener('keypress',async (ev)=>{
            if(ev.key=='Enter' && el.value && el2.value ){
              res = await Load('get Loans From Date',"10",{startDate:el.value,endDate:el2.value});
              res = res.result ; 
              liveStatisticsAnimation(res,1,(1.5)*FA,document.getElementById('nb-of-loans-by-date'));
              el.blur();
            }
          })

          el2.addEventListener('keypress',async (ev)=>{
            if(ev.key=='Enter' && el.value && el2.value){
              res = await Load('get Loans From Date',"10",{startDate:el.value,endDate:el2.value});
              res = res.result ; 
              liveStatisticsAnimation(res,1,(1.5)*FA,document.getElementById('nb-of-loans-by-date'));
              el2.blur();
            }
          })
        }


        async function updateEmplyeeBranch(){
          let el = document.getElementById('nb-of-emp-by-branch-inp') ;
          let res ;
          let br ;
          el.addEventListener('keyup',async (ev)=>{
            el.setCustomValidity('')
            if(ev.key=='Enter'){
              if (Number.isInteger(Number(el.value))){
                br = el.value;
                res = await Load("get Employees From Branch",br,{});
                res = res.result ; 
                per = (Math.round( (res*10000)/(EmployeesStatistics.totalNbOfEmployees) ))/100 ; 
                liveStatisticsAnimation(res,1,(1.5)*FA,document.getElementById('nb-of-emp-by-branch'));
                liveStatisticsAnimation(per,0.1,(1.5)*FA,document.getElementById('diff-branch-E'));
                el.blur();}
              else{
                el.setCustomValidity('invalid Branch Code')
                el.reportValidity();
              }
            }
            
          })

        }





        function loadInterstEvolution(){
          const ctx = document.getElementById('LoanChart');
            new Chart(ctx, {
              type: 'line',
              data: {
                labels: last6months,
                datasets: [{
                  label: 'Interst Rate',
                  data: interestRateEvelution,
                  tension: 0.4,          // smooth curve
                  borderColor : 'rgba(54, 162, 235, 1)',
                  backgroundColor : 'rgba(54, 162, 235, 0.2)' ,
                  fill: true,            // area under curve
                  borderWidth: 3,
                  pointRadius: 5
                }]
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                  legend: {
                    labels: {
                      color: 'white'
                    }
                  }
                },
                scales: {
                  x: {
                    ticks: { color: 'white' }
                  },
                  y: {
                    ticks: { color: 'white' }
                  }
                }
              }
            });}
        

        function loadCustomersEvolution(){
          const ctx = document.getElementById('CustomersChart');
          new Chart(ctx, {
            type: 'line',
            data: {
              labels: last6months,
              datasets: [{
                label: 'Number Of Accounts',
                data: nbOfCustomersEvelution,
                backgroundColor : 'rgba(74, 222, 128,.2)' ,
                fill: true,            // area under curve
                borderColor: '#4ade80',
                tension: 0.4,          // smooth curve
                borderWidth: 3,
                pointRadius: 5
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: {
                  labels: {
                    color: 'white'
                  }
                }
              },
              scales: {
                x: {
                  ticks: { color: 'white' }
                },
                y: {
                  ticks: { color: 'white' }
                }
              }
            }
          });}



          function loadEmployeesEvolution(){
          const ctx = document.getElementById('EmployeesChart');
          new Chart(ctx, {
            type: 'line',
            data: {
              labels: last6months,
              datasets: [{
                label: 'Number Of Employees',
                data: nbOfEmployeesEvelution,
                backgroundColor : 'rgba(167, 139, 250,.2)' ,
                fill: true,            // area under curve
                borderColor: '#a78bfa',
                tension: 0.4,          // smooth curve
                borderWidth: 3,
                pointRadius: 5
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: {
                  labels: {
                    color: 'white'
                  }
                }
              },
              scales: {
                x: {
                  ticks: { color: 'white' }
                },
                y: {
                  ticks: { color: 'white' }
                }
              }
            }
          });}

          function liveStatisticsAnimation(nb,step,time,el,addition=""){
            if(nb==0){el.innerText=0 ; return}
            var i ;
            let val = 0;
            el.innerText = 0 ;
            let add;
            if(time/(nb/step) < 4){
              step = (4*nb)/time ;
            }
            i = setInterval(()=>{
              val+=step;
              if(val>nb){val=nb};
              el.innerText = addition+(val).toFixed(fixBinaryIssue(step));

            },time/(nb/step))
            setTimeout(()=>{
              clearInterval(i);
              setTimeout(()=>el.innerText = addition+nb,time/(nb/step))
            },time);
          }
          function fixBinaryIssue(step){
            if (step>=1){return 0;}
            else{
              return -1*Math.log10(step);
            }
          }
          function increaseOrDecrease(per,el){
            let parent = el.parentElement ;
            if(per > 0){
              parent.className = 'st-b-g';
              return "▲ ";
            }
            else if (per < 0){
              parent.className = 'st-b-p';
              return "▼ ";
            }
            else{
              parent.className = 'st-b-n';
              return "▬ ";
            }
          }

        function loadAllStatisticAnimations(){
          el = document.getElementById('s-loan-status');
          el2 = document.getElementById('s-loan-type');
          
          setTimeout(()=>el.disabled=true,10);
          setTimeout(()=>el2.disabled=true,10);
          setTimeout(()=>el.disabled=false,AI+75);
          setTimeout(()=>el2.disabled=false,AI+75);

          liveStatisticsAnimation(LoansSdata[0].totalNbOfLoans,1,AI,document.getElementById('t-n-loans'));
          liveStatisticsAnimation(LoansSdata[0].ActiveLoans,1,AI,document.getElementById('nb-loans-by-status'));
          liveStatisticsAnimation(LoansSdata[0].buisnessLoans,1,AI,document.getElementById('nb-loans-by-type'));
          liveStatisticsAnimation(CustomersStatistics.totalNbOfAccounts,1,AI,document.getElementById('total-number-of-Cus'));
          liveStatisticsAnimation(EmployeesStatistics.totalNbOfEmployees,1,AI,document.getElementById('total-number-of-emp'));



          
          liveStatisticsAnimation(Math.abs(LoansSdata[1].totalNbOfLoans),0.01,AI,document.getElementById('diff-Total-L'),increaseOrDecrease(LoansSdata[1].totalNbOfLoans,document.getElementById('diff-Total-L')));
          liveStatisticsAnimation(Math.abs(LoansSdata[1].ActiveLoans),0.01,AI,document.getElementById('diff-Status-L'));
          liveStatisticsAnimation(Math.abs(LoansSdata[1].buisnessLoans),0.01,AI,document.getElementById('diff-Type-L'));
          liveStatisticsAnimation(Math.abs(CustomersStatistics.percentage),0.01,AI,document.getElementById('diff-Total-C'),increaseOrDecrease(CustomersStatistics.percentage,document.getElementById('diff-Total-C')));
          liveStatisticsAnimation(Math.abs(EmployeesStatistics.percentage),0.01,AI,document.getElementById('diff-Total-E'),increaseOrDecrease(EmployeesStatistics.percentage,document.getElementById('diff-Total-E')));

        }
        function loadStatistics(){          
          loadAllStatisticAnimations();
          document.getElementById('cus-most-loan').innerText = CustomersStatistics.mostLoans.CusNb ;
          document.getElementById('most-loan-for-cus').innerText = formatNumber(CustomersStatistics.mostLoans.loanNb) + " Loans";
          document.getElementById('acc-of-most-loan-of-cus').innerText = CustomersStatistics.mostLoans.fullName ;

          document.getElementById('cus-most-balance').innerText = CustomersStatistics.highestBalance.CusNb ;
          document.getElementById('most-balance-for-cus').innerText = formatNumber(CustomersStatistics.highestBalance.balance) + " TND";
          document.getElementById('acc-of-most-balance-of-cus').innerText = CustomersStatistics.highestBalance.fullName ;

          document.getElementById('cus-least-balance').innerText = CustomersStatistics.lowestBalance.CusNb ;
          document.getElementById('least-balance-for-cus').innerText = formatNumber(CustomersStatistics.lowestBalance.balance) + " TND";
          document.getElementById('acc-of-least-balance-of-cus').innerText = CustomersStatistics.lowestBalance.fullName ;


          document.getElementById('emp-most-salary').innerText = EmployeesStatistics.highestSalary.EmpNb ;
          document.getElementById('most-salary-for-emp').innerText = formatNumber(EmployeesStatistics.highestSalary.salary) + " TND";
          document.getElementById('emp-most-salary-status').innerText = EmployeesStatistics.highestSalary.status ;
          document.getElementById('emp-most-salary-status').className = "status-"+EmployeesStatistics.highestSalary.status ;


          document.getElementById('emp-least-salary').innerText = EmployeesStatistics.lowestSalary.EmpNb ;
          document.getElementById('least-salary-for-emp').innerText = formatNumber(EmployeesStatistics.lowestSalary.salary) + " TND";
          document.getElementById('emp-least-salary-status').innerText = EmployeesStatistics.lowestSalary.status ;
          document.getElementById('emp-least-salary-status').className = "status-"+EmployeesStatistics.lowestSalary.status ;

        }
        function formatNumber(n) {
          if (n < 1000) return Math.floor(n.toString());

          const units = [
            { value: 1e9, symbol: 'B' },
            { value: 1e6, symbol: 'M' },
            { value: 1e3, symbol: 'K' }
          ];

          for (const unit of units) {
            if (n >= unit.value) {
              const num = n / unit.value;
              return `${parseFloat(num.toFixed(1))}${unit.symbol}`;
            }
          }
        }



        loadInterstEvolution();
        loadCustomersEvolution();
        loadEmployeesEvolution();
        loadStatistics()
        document.addEventListener('visibilitychange', () => {
          if (document.visibilityState === 'visible') {
            loadAllStatisticAnimations();
        }});
    }
    </script>
  </body>
</html>